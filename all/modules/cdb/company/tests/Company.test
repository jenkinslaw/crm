<?php
/**
 * @file
 * Basic functional and Unit testing for Company Entity.
 */

class CompanyTestCase extends DrupalWebTestCase {

  private $company;

  function setUp() {
    $this->setup = TRUE;
    $this->company = new Company();
  }

  function tearDown() {
  }

  /**
   *  Initialize.
   */
  public static function getInfo() {
    return array(
      'name' => 'Company Entity tests.',
      'description' => 'Unit tests for Company entity.',
      'group' => 'Jenkins',
    );
  }

  /**
   * Verify mas90_name field assertions.
   */
  public function testMas90NameField() {
    $mas90_name = $this->company->getFieldInfo('mas90_name');

    $this->assertTrue(isset($mas90_name['bundles']['company']), "mas90_name is a company field.");
    $this->assertEqual($mas90_name['label'], 'Mas90 Name', "mas90_name label is 'Mas90 Name': $mas90_name[label].");
    $this->assertTrue($mas90_name['required'], "mas90_name is required.");
    $this->assertEqual($mas90_name['settings']['max_length'], 30, "mas90_name max_length is 30: $mas90_name[settings][max_length]");

  }

  /**
   * Verify suspended field assertions.
   */
  public function testSuspendedField() {
    $suspended = $this->company->getFieldInfo('suspended');
    $label = $suspended['label'];
    $required = $suspended['required'];
    $options = $this->company->suspended()->optionsList();

    $this->assertEqual($label, 'Suspended', "suspended label is 'Suspended': $suspended[label].");
    $this->assertTrue($required, "suspended is required.");

    $expected_options = array('Y' => 'Yes', 'N' => 'No', 'P' => 'Probation');
    $this->assertEqual($options, $expected_options, "The suspended options are as expected.");
  }

  /**
   * Verify address field.
   */
  public function testAddressField() {
    $address = $this->company->getFieldInfo('address');
    $label = $address['label'];
    $required = $address['required'];
    $this->assertTrue(is_array($address), "The address field is present in comany.");
    $this->assertFalse($required, 'The address is not required.');
    $this->assertEqual($label, 'Address', "The address label is 'Address' : $label");
  }

  /**
   * Verify exp_date field assertions.
   */
  public function testExpDateField() {
    // Always Jan 1 of the following year, unless the user is not a Company
    // Administrator: in which case we default to Null or empty.
    //
    // When this field gets updated make sure that the Invoice field is also
    // updated automatically.
    $exp_date = $this->company->getFieldInfo('exp_date');
    $this->assertEqual($exp_date['label'], "Expiration Date", "exp_date label is 'Expiration Date': $exp_date[label]");
    $this->assertFalse($exp_date['required'], "exp_date is not required.");
    $this->assertEqual($exp_date['type'], 'date', "exp_date type is Date: $exp_date[type].");
  }

  /**
   * Verify company_category field assertions.
   */
  public function testCompanyCategoryField() {
  }

  /**
   * Verify billing_area field assertions.
   */
  public function testBillingAreaField() {
  }

  /**
   * Verify phone field assertions.
   */
  public function testPhoneField() {
  }

  /**
   * Verify website field assertions.
   */
  public function testWebsiteField() {
  }

  /**
   * Verify cust_notes field assertions.
   */
  public function testCustomNotesField() {
  }

  /**
   * Verify account_number field assertions.
   */
  public function testAccountNumberField() {
  }

  /**
   * Verify last_updated field assertions.
   */
  public function testLastUpdatedField() {
  }

  /**
   * Verify updated_by field assertions.
   */
  public function testUpdatedByField() {
  }

  /**
   * Verify billing_contact field assertions.
   */
  public function testBillingContact() {
  }

  /**
   * Verify membership_contact field assertions.
   */
  public function testMembershipContactField() {
  }

  /**
   * Verify tax_exempt field assertions.
   */
  public function testTaxExemptField() {
  }

  /**
   * Verify invoice field assertions.
   */
  public function testInvoiceField() {
  }

  /**
   * Verify old_company_id field assertions.
   */
  public function testOldCompanyIdField() {
  }

  /**
   * Verify system_comments field assertions.
   */
  public function testSystemCommentsField() {
  }

  /**
   * Verify comment_range_start field assertions.
   */
  public function testCommentRangeStartField() {
  }

  /**
   * Verify comment_range_end field assertions.
   */
  public function testCommentRangeEndField() {
  }
}
